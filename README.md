# nf-core/fetchngs Workflow on Gitpod

This guide will walk you through setting up and running the `nf-core/fetchngs` Nextflow workflow on Gitpod using the `sratools` download method.

## Prerequisites

1. **Gitpod Account**: Make sure you have an account on [Gitpod](https://www.gitpod.io/).
2. **Fork the Repository**: Fork the [nf-core/fetchngs](https://github.com/nf-core/fetchngs) repository to your GitHub account.

## Setup

1. **Launch Gitpod**: Open your forked repository on GitHub and click the Gitpod button to launch a new workspace.

2. **Verify Nextflow Installation**: Ensure Nextflow is installed and working. Run the following command in the Gitpod terminal:
   ```sh
   nextflow info
   ```
   You should see output similar to:
   ```
   Version: 24.04.2 build 5914
   Created: 29-05-2024 06:19 UTC
   System: Linux 6.1.89-060189-generic
   Runtime: Groovy 4.0.21 on OpenJDK 64-Bit Server VM 17.0.11-internal+0-adhoc..src
   Encoding: UTF-8 (UTF-8)
   ```

## Running the Workflow

1. **Create the Input File**: Create an `ids.csv` file with the database IDs. Each line represents a database ID.

   ```sh
   echo -e "SRR9984183\nSRR13191702\nERR1160846\nERR1109373\nDRR028935\nDRR026872" > ids.csv
   ```

2. **Run the Workflow**: Execute the `fetchngs` workflow using Nextflow with the `sratools` download method.
   ```sh
   nextflow run nf-core/fetchngs -profile docker --input ids.csv --outdir output --download_method sratools
   ```

## Verifying the Output

1. **Check the Output Directory**: Verify that the output files have been downloaded and processed correctly.

   ```sh
   ls output
   ```

2. **Review Logs**: Optionally, review the logs for any warnings or important messages.
   ```sh
   find work -name '.command.log' -exec cat {} \;
   ```

## Using the Output

The output generated by nf-core/fetchngs can be seamlessly used as input for the following workflows:

- [nf-core/rnaseq](https://nf-co.re/rnaseq/3.14.0/docs/usage#samplesheet-input)
- [nf-core/atacseq](https://nf-co.re/atacseq/2.1.2/docs/usage#samplesheet-input)
- [Illumina processing mode of nf-core/viralrecon](https://nf-co.re/viralrecon/2.6.0/docs/usage#illumina-samplesheet-format)

Note : in original workflow, the output can also be used on nf-core/taxprofiler. However, the link of the workflow is no longer exist.

As an example, To use the output of nf-core/fetchngs with nf-core/rnaseq, follow these steps:

1. **Modify Samplesheet.csv**: Add a new column named `strandedness` to the `samplesheet.csv` file with the value "auto" for all samples. This ensures that the strandedness of RNA-seq libraries will be automatically detected during the analysis.

2. **Run nf-core/rnaseq**: Execute the nf-core/rnaseq workflow with the modified `samplesheet.csv` file as input.

   ```sh
   nextflow run nf-core/rnaseq \
     --input /path/to/modified/samplesheet.csv \
     --outdir /path/to/rnaseq_output \
     --genome GRCh37 \
     -profile docker
   ```

Replace `/path/to/modified/samplesheet.csv` with the path to your modified `samplesheet.csv` file and `/path/to/rnaseq_output` with the desired output directory.

For other workflows, you can check on how to modified samplesheet.csv from the hyperlink above.

## Citations

The nf-core framework for community-curated bioinformatics pipelines.

Philip Ewels, Alexander Peltzer, Sven Fillinger, Harshil Patel, Johannes Alneberg, Andreas Wilm, Maxime Ulysse Garcia, Paolo Di Tommaso & Sven Nahnsen.

Nat Biotechnol. 2020 Feb 13. doi: [10.1038/s41587-020-0439-x](https://doi.org/10.1038/s41587-020-0439-x).

## Conclusion

By following these steps, you should be able to successfully run the `nf-core/fetchngs` workflow on Gitpod using the `sratools` download method. Ensure you review the outputs and logs to verify that the workflow has completed as expected.

## Credits

nf-core/fetchngs was originally written by Harshil Patel (@drpatelh) from Seqera Labs, Spain and Jose Espinosa-Carrasco (@JoseEspinosa) from The Comparative Bioinformatics Group at The Centre for Genomic Regulation, Spain. Support for download of sequencing reads without FTP links via sra-tools was added by Moritz E. Beber (@Midnighter) from Unseen Bio ApS, Denmark.
